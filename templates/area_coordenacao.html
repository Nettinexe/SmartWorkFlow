{% extends 'base.html' %}

{% block title %}Coordenação Pedagógica{% endblock %}

{% block content %}
<div class="mb-4">
    <h2 class="text-primary fw-bold"><i class="bi bi-briefcase-fill"></i> Painel da Coordenação</h2>
    <p class="text-muted">Gerencie aprovações de relatórios e banco de atividades.</p>
</div>

<ul class="nav nav-tabs mb-4" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
        <button class="nav-link active fw-bold" id="sugestoes-tab" data-bs-toggle="tab" data-bs-target="#sugestoes" type="button" role="tab">
            <i class="bi bi-lightbulb"></i> Sugestões de Atividades
            {% if sugestoes %}
            <span class="badge bg-danger rounded-pill ms-1">{{ sugestoes.count }}</span>
            {% endif %}
        </button>
    </li>
    <li class="nav-item" role="presentation">
        <button class="nav-link fw-bold text-muted" id="relatorios-tab" data-bs-toggle="tab" data-bs-target="#relatorios" type="button" role="tab">
            <i class="bi bi-file-earmark-text"></i> Relatórios Pendentes
            {% if relatorios %}
            <span class="badge bg-danger rounded-pill ms-1">{{ relatorios.count }}</span>
            {% endif %}
        </button>
    </li>
</ul>

<div class="tab-content" id="myTabContent">
    
    <div class="tab-pane fade show active" id="sugestoes" role="tabpanel">
        <div class="row">
            {% for sugestao in sugestoes %}
            <div class="col-md-6 mb-3">
                <div class="card border-warning border-start border-4 shadow-sm">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start">
                            <h5 class="card-title fw-bold">{{ sugestao.titulo }}</h5>
                            <span class="badge bg-warning text-dark">Nível {{ sugestao.nivel_alvo }}</span>
                        </div>
                        <h6 class="card-subtitle mb-2 text-muted small">
                            Autor: {{ sugestao.professor_autor.first_name }} | 
                            Comp: {{ sugestao.competencia.codigo }}
                        </h6>
                        <p class="card-text bg-light p-2 rounded small fst-italic">
                            "{{ sugestao.descricao }}"
                        </p>
                        
                        <div class="d-flex gap-2 mt-3">
                            <a href="{% url 'gerenciar_sugestao' sugestao.id 'aprovar' %}" class="btn btn-success btn-sm w-50">
                                <i class="bi bi-check-lg"></i> Aprovar
                            </a>
                            <a href="{% url 'gerenciar_sugestao' sugestao.id 'rejeitar' %}" class="btn btn-outline-danger btn-sm w-50">
                                <i class="bi bi-x-lg"></i> Rejeitar
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% empty %}
            <div class="col-12 text-center py-5 text-muted">
                <i class="bi bi-check-circle display-4"></i>
                <p class="mt-2">Nenhuma sugestão pendente de aprovação.</p>
            </div>
            {% endfor %}
        </div>
    </div>

    <div class="tab-pane fade" id="relatorios" role="tabpanel">
        <div class="alert alert-info text-center">
            Ainda não implementamos o botão de "Enviar Relatório" para o professor.<br>
            Faremos isso na próxima etapa!
        </div>
    </div>
</div>
{% endblock %}